exports.id=0,exports.modules={"./src/server/server.js":function(o,e,n){"use strict";n.r(e);var t=n("./build/contracts/FlightSuretyApp.json"),c=n("./build/contracts/FlightSuretyData.json"),r=n("./src/server/config.json"),s=n("web3"),a=n.n(s),l=n("express"),i=n.n(l),u=r.localhost,d=new a.a(new a.a.providers.WebsocketProvider(u.url.replace("http","ws")));d.eth.defaultAccount=d.eth.accounts[0];var h=new d.eth.Contract(t.abi,u.appAddress),f=new d.eth.Contract(c.abi,u.dataAddress),g={},p=[0,10,20,30,40,50];console.log("Server App"),d.eth.getAccounts().then(function(o){console.log("Number of aacounts: "+o.length),console.log(o[0]),f.methods.authorizeCaller(u.appAddress).send({from:o[0]}).then(function(o){console.log("Contrct Address ( ".concat(u.appAddress," ) is an authorized contract"))}).catch(function(o){console.log("Error1: "+o)}),console.log("Oracle Registration:"),h.methods.REGISTRATION_FEE().call().then(function(e){console.log("Registration fee: ".concat(e," Wei"));for(var n=function(e){h.methods.registerOracle().send({from:o[0],value:d.utils.toWei("1","ether"),gas:4e6}).then(function(n){console.log("dd"),h.methods.getMyIndexes().call({from:o[0]}).then(function(n){g[o[e]]=n,console.log("Oracle #".concat(e," , Acoount(").concat(o[e]," , Indices: ").concat(n))}).catch(function(o){console.log("Error2:"+o)})}).catch(function(o){console.log("Error3:"+o)})},t=30;t<=50;t++)n(t)}).catch(function(o){console.log("Error4:"+o)})}).catch(function(o){console.log("Error5:"+o)}),h.events.OracleRequest({fromBlock:0},function(o,e){var n;o?console.log(o):function(){var o=e.returnValues.index,t=e.returnValues.airline,c=e.returnValues.flight,r=e.returnValues.timestamp;for(n in g)g[n].includes(o)&&function(){var e=p[Math.floor(6*Math.random())];h.methods.submitOracleResponse(o,t,c,r,e).send({from:n,gas:1e6}).then(function(n){console.log("Oracle response: \n            Index: ".concat(o," , \n            Airline: ").concat(t," ,\n            Flight: ").concat(c," ,\n            Timestamp: ").concat(r," ,\n            Status Code: ").concat(e,"\n            "))}).catch(function(o){console.log("Error6:"+o)})}()}()}),h.events.FlightStatusInfo({fromBlock:0},function(o,e){o?console.log(o):console.log("FlightStatusInfo event: \n    Index: ".concat(e.returnValues.index," , \n    Airline: ").concat(e.returnValues.airline," ,\n    Flight: ").concat(e.returnValues.flight," ,\n    Timestamp: ").concat(e.returnValues.timestamp,"\n    "))});var m=i()();m.get("/api",function(o,e){e.send({message:"An API for use with your Dapp!"})}),e.default=m}};