exports.id=0,exports.modules={"./src/server/server.js":function(e,n,o){"use strict";o.r(n);var t=o("./build/contracts/FlightSuretyApp.json"),c=o("./build/contracts/FlightSuretyData.json"),r=o("./src/server/config.json"),s=o("web3"),a=o.n(s),l=o("express"),i=o.n(l),u=r.localhost,h=new a.a(new a.a.providers.WebsocketProvider(u.url.replace("http","ws")));h.eth.defaultAccount=h.eth.accounts[0];var d=new h.eth.Contract(t.abi,u.appAddress),f=new h.eth.Contract(c.abi,u.dataAddress),g={},p=[0,10,20,30,40,50];console.log("Server App"),h.eth.getAccounts().then(function(e){console.log("Number of aacounts: "+e.length),console.log(e[0]),f.methods.authorizeCaller(u.appAddress).send({from:e[0],gas:4e6}).then(function(e){console.log("Contrct Address ( ".concat(u.appAddress," ) is an authorized contract"))}).catch(function(e){console.log("Error1: "+e)}),console.log("Oracle Registration:"),d.methods.REGISTRATION_FEE().call().then(function(n){console.log("Registration fee: ".concat(n," ether"));for(var o=function(o){d.methods.registerOracle().send({from:e[o],value:n,gas:4e6}).then(function(n){d.methods.getMyIndexes().call({from:e[o]}).then(function(n){g[e[o]]=n,console.log("Oracle #".concat(o," , Acoount(").concat(e[o]," , Indices: ").concat(n))}).catch(function(e){console.log("Error2:"+e)})}).catch(function(e){console.log("Error3:"+e)})},t=30;t<=50;t++)o(t)}).catch(function(e){console.log("Error4:"+e)})}).catch(function(e){console.log("Error5:"+e)}),d.events.OracleRequest({fromBlock:0},function(e,n){var o;e?console.log(e):function(){var e=n.returnValues.index,t=n.returnValues.airline,c=n.returnValues.flight,r=n.returnValues.timestamp;for(o in g)g[o].includes(e)&&function(){var n=p[Math.floor(6*Math.random())];d.methods.submitOracleResponse(e,t,c,r,n).send({from:o,gas:1e6}).then(function(o){console.log("Oracle response: \n            Index: ".concat(e," , \n            Airline: ").concat(t," ,\n            Flight: ").concat(c," ,\n            Timestamp: ").concat(r," ,\n            Status Code: ").concat(n,"\n            "))}).catch(function(e){console.log("Error6:"+e)})}()}()}),d.events.FlightStatusInfo({fromBlock:0},function(e,n){e?console.log(e):console.log("FlightStatusInfo event: \n    Index: ".concat(n.returnValues.index," , \n    Airline: ").concat(n.returnValues.airline," ,\n    Flight: ").concat(n.returnValues.flight," ,\n    Timestamp: ").concat(n.returnValues.timestamp,"\n    "))});var m=i()();m.get("/api",function(e,n){n.send({message:"An API for use with your Dapp!"})}),n.default=m}};